<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Auth0 PhoneGap sample</title>
    </head>
    <body>
        <div class="app">
            <button id="login-adfs">Login with ADFS</button>
            <p id="result">Not logged in yet.</p>
        </div>

        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="js/auth0.js"></script>
        <script type="text/javascript">
            $(document).on('deviceready', function() {
                var domain          = 'contoso.auth0.com'; // e.g.: contoso.auth0.com
                var clientId        = 'KPmb7b0Pps5jwzBRTc3wJzR9zQeCfDr5';
                var clientSecret    = 'MLgQgSl2SyL46vToZ3w_pYCMjLxYKqGze-4lvJc9yceUg6Y-Pggq1huvxg0v58X2';
                var connection      = 'partner.com';

                var auth0Client = new Auth0Client(domain, clientId, clientSecret);

                $('#login-adfs').on('click', function() {
                    $('#result').html('Loading...');

                    auth0Client.login({ connection: connection }, function (err, auth0User) {
                        if (err) $('#result').html('error: ' + err.message);
                        else {
                            // * Use auth0User to do wonderful things, e.g.:
                            // - get user email => auth0User.profile.email
                            // - get facebook/google/twitter/etc access token => auth0User.profile.identities[0].access_token
                            // - get Windows Azure AD groups => auth0User.profile.groups
                            // - etc.
                            $('#result').html('Hello ' + auth0User.profile.name + '!');
                        }
                    });
                });
            });
        </script>
    </body>
</html>
